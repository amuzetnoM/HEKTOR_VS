# v4.1.0

**Hektor Vector Database v4.1.0** - Production Release with Studio Native Addon & Build System Fixes

Release date: 2026-01-24

---

## Highlights

### üîß Build System Resolution (Critical Fix)

This release resolves critical C++23 compatibility issues that affected builds across all platforms:

- **Root Cause**: `std::expected<T,E>` (C++23 feature) was used throughout the codebase but CI/CD pipelines were using compilers without full C++23 support
- **Solution**: Upgraded all CI/CD compiler requirements to C++23-compatible versions:
  - **Linux**: GCC 14+ / Clang 18+ (Ubuntu 24.04)
  - **Windows**: MSVC 19.33+ (Visual Studio 2022 17.3+)
  - **macOS**: Apple Clang 15+ (Xcode 15+)

### üé¨ Perceptual Quantization - Full Dolby Compatibility

Complete implementation of HDR-aware quantization for professional media workflows:

- **SMPTE ST 2084 (PQ)**: Full implementation for HDR10, Dolby Vision
- **HLG Rec.2100**: BBC/NHK HDR standard support
- **Gamma Curves**: 2.2 (sRGB), 2.4 (BT.1886) for SDR
- **Display Profiles**: SDR, HDR10, DolbyVision, HLG, HDR1000
- **Netflix Compatibility**: Encoding pipeline compatible with professional streaming requirements

### üñ•Ô∏è Studio Native Addon - Fully Functional

Switched from node-gyp to cmake-js for C++23 compatibility with Node 22:

- **BM25Engine**: Full-text search with Porter stemming
- **KeywordExtractor**: TF-IDF keyword extraction
- **HybridSearchEngine**: Vector + lexical fusion (RRF, WeightedSum, CombSUM, CombMNZ, Borda)
- **QueryRewriter**: Query expansion and synonym handling
- **Quantization**: Full PQ, SQ, HDR support with all transfer functions

### üì¶ Installation & Packaging

- **PyPI**: `pip install hektor-vdb` (NOT `hektor` - that's a different project)
- **Author**: Ali A. Shakil / ARTIFACT VIRTUAL
- **Docker**: Multi-arch images (amd64, arm64) on GHCR
- **Source Build**: Improved `build-hektor.sh` with visual progress indicators

---

## Performance

| Metric | v4.0.0 | v4.1.0 | Notes |
|--------|--------|--------|-------|
| Query Latency (p99) | 2.9ms | 2.9ms | Maintained |
| Recall@10 (PQ-enabled) | 98.1% | 98.1% | Maintained |
| Build Time (Linux) | ~5min | ~4min | Improved parallelization |
| Studio Addon Load | N/A | <50ms | New feature |

---

## Build System Requirements

### Minimum Compiler Versions (C++23 Required)

| Platform | Compiler | Minimum Version | Recommended |
|----------|----------|-----------------|-------------|
| Linux | GCC | 13.0 | 14.0+ |
| Linux | Clang | 16.0 | 18.0+ |
| Windows | MSVC | 19.33 (VS 17.3) | 19.38+ (VS 17.8) |
| macOS | Apple Clang | 15.0 (Xcode 15) | 15.3+ |

### Why C++23?

The project uses `std::expected<T,E>` for robust error handling without exceptions. This feature:
- Provides zero-overhead error handling
- Enables composable error propagation
- Is essential for the high-performance requirements of vector operations

---

## Migration Notes

- **No breaking API changes** from v4.0.0
- **Recommendation**: Update compiler toolchains to meet C++23 requirements
- **Studio Users**: Rebuild native addon with `npm run build:native`

---

## Installation

```bash
# Via pip (recommended)
pip install hektor-vdb

# With ML dependencies
pip install hektor-vdb[ml]

# From source
git clone https://github.com/amuzetnoM/hektor.git
cd hektor
./build-hektor.sh

# Docker
docker pull ghcr.io/amuzetnom/hektor:v4.1.0
```

---

## Full Changelog

### Added
- Full N-API implementation for Studio native addon
- cmake-js build system for Node.js addon (replaces node-gyp)
- Complete PQ/HDR transfer function implementations (ST.2084, HLG, Gamma)
- Comprehensive build system research documentation
- Visual progress indicators in build script

### Fixed
- C++23 `std::expected` compatibility with all target compilers
- CI/CD pipeline compiler version requirements
- Studio addon linking against vdb_core library
- PyPI package metadata (author, maintainer)

### Changed
- Upgraded CI runners to Ubuntu 24.04 for GCC 14 support
- Updated release workflow to use correct PyPI package name
- Improved error messages for unsupported compiler versions

### Documentation
- Added SMPTE ST 2084 implementation research
- Added BM25 algorithm documentation
- Added RAG pipeline documentation
- Added AVX-512 optimization documentation
- Added comprehensive feature matrix
- Created build system issues research document

---

## Contributors

- Ali A. Shakil (@amuzetnoM) - ARTIFACT VIRTUAL

---

## Links

- **PyPI**: https://pypi.org/project/hektor-vdb/
- **GitHub**: https://github.com/amuzetnoM/hektor
- **Docker**: ghcr.io/amuzetnom/hektor:v4.1.0
- **Documentation**: https://github.com/amuzetnoM/hektor/tree/main/docs
